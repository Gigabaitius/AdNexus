### Полное описание проекта AdNexus

### Полное описание проекта AdNexus

**AdNexus** (Advertising Nexus) — это веб-приложение, представляющее собой биржу рекламы, где пользователи могут выступать в роли рекламодателей (создавать и размещать рекламные кампании) или владельцев площадок (продавать места для рекламы на своих сайтах, Telegram-каналах или других платформах). Сайт позиционируется как "Нексус" — соединяющий хаб, который облегчает взаимодействие между сторонами через систему тегов для точного таргетинга аудитории. Пользователи могут как размещать рекламу, так и продавать место под неё. Для повышения вовлеченности и монетизации предусмотрена ограниченная интеграция нейросетей (AI-сервисы): автоматизированная генерация рекламы по объекту, определение и добавление тегов для площадок/рекламы по содержимому, а также подбор подходящих площадок по тегам с использованием простого алгоритма (платно или по системе лояльности/грейдам). Это учебный/прототипный проект на этапе активной разработки, с фокусом на backend API, admin-панели и масштабируемой структуре для будущих фич.

#### Основные цели:
- Авторизация и управление пользователями (регистрация, логин, CRUD-операции с ролями: пользователь, администратор, модератор).
- Создание и управление рекламными кампаниями (добавление, поиск с фильтрами/сортировкой/пагинацией, редактирование, удаление).
- Управление площадками для размещения рекламы (добавление, валидация, подбор по тегам).
- Ролевая модель: Админы управляют всем, модераторы — контентом и модерацией, пользователи — своими кампаниями и площадками.
- Масштабируемая система с интеграцией AI для генерации контента, тегов и подбора (с ограничениями по платным грейдам или лояльности).
- Монетизация через грейды, лояльность и геймификацию.

#### Технологический стек:
- **Backend**: Node.js + Express.js, SQLite (базы: users.db, adCampaigns.db), JWT для аутентификации, bcrypt для хэширования паролей, Joi для валидации.
- **Frontend**: Чистый HTML/CSS/JS, динамическая загрузка компонентов (header/footer), fetch для API-запросов.
- **Архитектура**: MVC (models для БД, controllers для логики, routes для маршрутов), middleware (аутентификация, валидация, логирование с morgan/Winston).
- **Дополнительно**: dotenv для .env, пагинация/фильтры в API, глобальная обработка ошибок.
- **Планируемые улучшения**: Миграция на PostgreSQL, версионирование API (/api/v1/), rate limiting, refresh токены, 2FA.

#### Ключевые особенности:
- **API**: RESTful эндпоинты (/api/users, /api/campaigns) с поддержкой CRUD, фильтров (query params как ?status=active&sort=budget:desc), пагинации (?page=1&limit=10).
- **Безопасность**: JWT-токены, ролевые проверки (requireAdmin/Moderator), валидация данных.
- **Логирование**: morgan для запросов, winston для ошибок.
- **Frontend-админ**: Таблицы с поиском/фильтрами, формы добавления/редактирования/удаления (с модальными окнами).
- **AI-интеграция**: Ограниченная (платные генерации или по грейдам/лояльности) — автоматизированная генерация рекламы по объекту, определение/добавление тегов по содержимому, подбор площадок по тегам (простой алгоритм на основе совпадений тегов).
- **Уникальные фичи**: "Умный старт" (AI-ассистент для новичков), система доверия (верификация площадок, эскроу), социальные элементы (подписки, кейсы).

#### Текущий статус:
- Backend: Полноценные CRUD для пользователей и кампаний, MVC-структура (models/controllers/routes).
- Frontend: Базовые страницы (login, register, admin), динамика через JS.

### Планируемые функции и сущности

#### Основные сущности (текущие и планируемые):
- **Users** (пользователи): Хранение профилей, ролей, баланса. **Степень выполнения**: 90% (CRUD, роли, JWT — готово; добавить баланс/лояльность/email-верификацию).
- **Campaigns** (рекламные кампании): Хранение деталей кампаний, тегов, бюджета. **Степень выполнения**: 85% (CRUD с фильтрами/пагинацией — готово; добавить теги/AI-генерацию).
- **Platforms** (площадки для рекламы): Хранение сайтов/каналов с тегами, статистикой. **Степень выполнения**: 0% (приоритет для MVP).
- **Transactions** (транзакции): Логи платежей, переводов между пользователями. **Степень выполнения**: 0% (планируется с Stripe).
- **Tags** (теги): Сущность для тегов кампаний/площадок (категории, аудитория). **Степень выполнения**: 0% (приоритет для MVP).
- **Reviews** (отзывы): Отзывы на кампании, площадки, пользователей. **Степень выполнения**: 0%.
- **Achievements** (достижения): Для геймификации. **Степень выполнения**: 0%.
- **Subscriptions** (подписки/грейды): Уровни (free, standard, premium). **Степень выполнения**: 0%.

#### Планируемые функции (расширенный список):
- **Система тегов**: Теги для площадок/кампаний для таргетинга аудитории. AI-подбор по тегам. **Степень**: 0% (приоритет для MVP).
- **AI-интеграция**: Генерация рекламы, авто-теги, подбор площадок (ограничено по грейдам). **Степень**: 0% (интеграция OpenAI API).
- **Система лояльности**: Поощрения за активность. **Степень**: 0%.
- **Платные грейды**: Free/standard/premium с разными лимитами и бонусами. **Степень**: 0%.
- **Геймификация**: Достижения с бонусной валютой. **Степень**: 0%.
- **Система отзывов**: Отзывы после завершения с рейтингом. **Степень**: 0%.
- **Транзакции и платежи**: Переводы, заморозка средств, интеграция Stripe. **Степень**: 0%.
- **Аналитика и статистика**: Отчеты, dashboard, экспорт в CSV. **Степень**: 0%.
- **Чат/переговоры**: Встроенный чат между участниками. **Степень**: 0%.
- **Модерация контента**: Проверка кампаний/площадок. **Степень**: 15% (роли готовы; нужна логика).
- **Быстрые улучшения**: Email-уведомления, темная тема, Swagger документация. **Степень**: 0%.

### Пошаговый разбор текущих и планируемых бизнес-процессов

#### Текущие процессы (частично реализованы)
1. **Регистрация и вход пользователя**:
   - Пользователь вводит username, email, password на фронтенде.
   - Frontend отправляет POST /api/register или /api/login.
   - Backend валидирует данные (Joi), хеширует пароль (bcrypt), сохраняет в users.db.
   - Возвращает JWT-токен для сессии.
   - **Статус**: 95% (реализовано; добавить email-верификацию).

2. **Управление пользователями (админ)**:
   - Админ заходит в панель, видит список пользователей.
   - Выполняет поиск/фильтры, редактирует (PUT /api/users/:id) или удаляет (DELETE).
   - **Статус**: 90% (готово с пагинацией/фильтрами).

3. **Создание/управление кампанией (рекламодатель)**:
   - Авторизованный пользователь заполняет форму (title, budget и т.д.).
   - Frontend отправляет POST /api/campaigns.
   - Backend валидирует, сохраняет в adCampaigns.db, ассоциирует с user_id.
   - Админ/модератор может просматривать/модерировать.
   - **Статус**: 85% (CRUD готов; добавить теги/AI).

#### Планируемые процессы (приоритеты для MVP)
1. **Процесс площадок (владелец)** (приоритет):
   - Владелец добавляет площадку (URL/канал, описание, теги).
   - Backend валидирует, сохраняет в platforms.db.
   - Автоматическая валидация через TG-бот/Google Analytics API.
   - AI-анализ для авто-тегов по контенту.
   - Площадка доступна для поиска по тегам.
   - После размещения: проверка выполнения, перевод средств минус комиссия.
   - Задержка вывода (1 неделя) против мошенничества.

2. **Процесс создания и запуска кампании** (приоритет):
   - Создание кампании с AI-генерацией текста/тегов (по грейду).
   - Выбор площадок (ручной или AI-подбор по тегам).
   - Расчет стоимости, заморозка средств.
   - Модерация контента, автоматическое размещение.
   - Отслеживание статистики, расчет ROI.

3. **Процесс транзакций и платежей**:
   - Пополнение баланса (Stripe/PayPal).
   - Заморозка средств при запуске кампании.
   - Перевод владельцу площадки минус комиссия.
   - История транзакций, возвраты при спорах.

4. **Процесс модерации контента**:
   - Очередь модерации для новых кампаний/площадок.
   - Проверка на соответствие правилам.
   - AI-помощник для предварительной модерации.
   - Разрешение споров по статистике.

5. **Процесс AI-интеграции**:
   - Проверка лимита по грейду/лояльности.
   - Запрос к OpenAI API для генерации/анализа.
   - Авто-добавление результатов в кампанию/площадку.
   - Лимиты: free (5/мес), premium (unlimited).

6. **Процесс лояльности и грейдов**:
   - Баллы за активности (кампании, отзывы).
   - Грейды с бонусами (скидки комиссии, AI-генерации).
   - Обмен баллов на функции.

7. **Процесс геймификации**:
   - Отслеживание достижений ("Новичок", "Магнат").
   - Бонусная валюта для оплаты функций.
   - Лидерборды по активности.

8. **Процесс отзывов и рейтингов**:
   - Авто-запрос отзыва после завершения.
   - Влияние на рейтинг и видимость в поиске.
   - Модерация для предотвращения спама.

#### Монетизация (быстрый старт):
- Лимиты бесплатных аккаунтов (3 кампании, 5 площадок)
- Платная верификация площадок
- Премиум размещение в поиске
- API доступ для автоматизации

### Пошаговый разбор текущих и планируемых бизнес-процессов

Я проанализировал логику сайта как биржи: рекламодатели создают кампании, владельцы добавляют площадки, система соединяет их через теги/AI, обрабатывает транзакции, модерацию и отзывы. Процессы разделены на текущие (частично реализованные) и планируемые (с нуля). Каждый процесс описан пошагово, с ролями участников и интеграциями.

#### Текущие процессы (частично реализованы ~50-70%)
1. **Регистрация и вход пользователя**:
   - Пользователь вводит username, email, password на фронтенде.
   - Frontend отправляет POST /api/register или /api/login.
   - Backend валидирует данные (Joi), хеширует пароль (bcrypt), сохраняет в users.db.
   - Возвращает JWT-токен для сессии.
   - **Статус**: Реализовано (CRUD users); добавить верификацию email.

2. **Управление пользователями (админ)**:
   - Админ заходит в панель, видит список пользователей.
   - Выполняет поиск/фильтры, редактирует (PUT /api/users/:id) или удаляет (DELETE /api/users/:id).
   - **Статус**: Реализовано (CRUD); добавить пагинацию/фильтры.

3. **Создание/управление кампанией (рекламодатель)**:
   - Авторизованный пользователь заполняет форму (title, budget и т.д.).
   - Frontend отправляет POST /api/campaigns.
   - Backend валидирует, сохраняет в adCampaigns.db, ассоциирует с user_id.
   - Админ/модератор может просматривать/модерировать.
   - **Статус**: Реализовано базово (CRUD); добавить теги/AI-генерацию.

#### Планируемые процессы (реализовано 0-10%)
1. **Процесс площадок (владелец)** (как в вашем примере, с расширениями):
   - Владелец добавляет площадку (URL/канал, описание, теги) через форму.
   - Frontend отправляет POST /api/platforms.
   - Backend валидирует (Joi), сохраняет в platforms.db, ассоциирует с user_id.
   - Автоматическая валидация: Интеграция с TG-ботом/Google Analytics для проверки статистики (аудитория, активность).
   - Площадка добавляется в общий пул, становится доступной для поиска (по тегам/AI-подбор).
   - Рекламодатель выбирает площадку (ручной/AI-подбор), добавляет в кампанию.
   - Сумма (по цене площадки) замораживается на счете кампании до выполнения.
   - После размещения: Система проверяет выполнение (статистика кликов/показов).
   - Если OK, сумма переводится владельцу (транзакция в transactions.db, минус % комиссии сайта).
   - При споре: Модератор проверяет статистику с обеих сторон; возможен возврат/штраф.
   - Задержка вывода средств (1 неделя) для предотвращения мошенничества (cheat&run).
   - **Расширение**: AI-анализ площадки для авто-тегов (аудитория, тематика).

2. **Процесс создания и запуска кампании (рекламодатель)**:
   - Рекламодатель создает кампанию (title, budget, теги, текст) через форму.
   - Опционально: AI-генерация текста/тегов (платно/по грейду).
   - Выбирает площадки (ручной поиск или AI-подбор по тегам/аудитории).
   - Указывает бюджет/период; система рассчитывает стоимость.
   - Кампания сохраняется, проходит модерацию (модератор проверяет контент).
   - После одобрения: Автоматическое размещение на площадках, мониторинг статистики.
   - По завершению: Авто-отзывы, расчет ROI (возврат инвестиций).
   - **Расширение**: Интеграция с внешними API для трекинга (Google Analytics).

3. **Процесс транзакций и платежей**:
   - Пользователь пополняет баланс (интеграция Stripe/PayPal).
   - При запуске кампании: Сумма замораживается (hold) на счете.
   - После выполнения: Транзакция (transfer) владельцу площадки минус комиссия сайта.
   - Запись в transactions.db: from_user, to_user, amount, status, timestamp.
   - Вывод средств: С задержкой (1 неделя), проверка на фрод (мошенничество).
   - **Расширение**: Возвраты при спорах, история транзакций в личном кабинете.

4. **Процесс модерации контента (модератор/админ)**:
   - Новая кампания/площадка попадает в очередь модерации.
   - Модератор проверяет на соответствие правилам (теги, контент, статистика).
   - Одобрение/отклонение с уведомлением пользователю.
   - Споры: Просмотр статистики, решение о возврате/штрафах.
   - **Расширение**: AI-помощник для предварительной модерации (флаги на подозрительный контент).

5. **Процесс AI-интеграции**:
   - Пользователь запрашивает AI (генерация текста, тегов, подбор площадок).
   - Проверка лимита (по грейду/лояльности; платно если превышен).
   - Запрос к AI-API (OpenAI/ChatGPT), обработка ответа.
   - Интеграция в кампанию/площадку (авто-добавление тегов).
   - **Расширение**: Лимиты по грейдам (free: 5 генераций/мес, premium: unlimited).

6. **Процесс лояльности и грейдов**:
   - Регистрация в системе лояльности (баллы за активности: кампании, отзывы).
   - Грейды (free/standard/premium): Покупка/подписка, бонусы (скидки комиссии, AI-генерации, множители баллов).
   - Баллы обмениваются на бонусы (скидки, валюту).
   - **Расширение**: Ежемесячный ресет/накопление.

7. **Процесс геймификации и достижений**:
   - Система отслеживает действия (кол-во кампаний, отзывы, приглашения).
   - Достижения: "Новичок" (первая кампания), "Магнат" (100к бюджета).
   - Награды: Бонусная валюта для оплаты функций (AI, вывод без задержки).
   - **Расширение**: Лидерборды по баллам.

8. **Процесс отзывов и рейтингов**:
   - После завершения/отмены: Авто-запрос отзыва от обеих сторон.
   - Отзывы сохраняются в reviews.db, влияют на рейтинг (звезды, комментарии).
   - Модерация отзывов для предотвращения спама.
   - **Расширение**: Влияние на видимость в поиске (высокий рейтинг — выше в рекомендациях). 

Эти процессы обеспечивают полный цикл: от регистрации до монетизации и анализа. Текущие реализованы базово (users/campaigns), планируемые требуют новых сущностей (transactions, reviews) и интеграций (AI, платежи).

Текущий репозиторий: https://github.com/Gigabaitius/AdNexus/tree/v0.0.3
Учти информацию выше, проанализируй репозиторий.
Обнови статусы готовности частей проекта. 
Не сокращай имеющиеся пункты, можешь дополнять результат отдельной секцией с твоими идеями и/или предложениями по улучшению проекта, при согласии пользователя - дополняй ими основной текст.

Наша задача - создать востребованный сервис.
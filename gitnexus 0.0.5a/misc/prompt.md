### Полное описание проекта AdNexus

**AdNexus** (Advertising Nexus) — это веб-приложение, представляющее собой биржу рекламы, где пользователи могут выступать в роли рекламодателей (создавать и размещать рекламные кампании) или владельцев площадок (продавать места для рекламы на своих сайтах, Telegram-каналах или других платформах). Сайт позиционируется как "Нексус" — соединяющий хаб, который облегчает взаимодействие между сторонами через систему тегов для точного таргетинга аудитории. Пользователи могут как размещать рекламу, так и продавать место под неё. Для повышения вовлеченности и монетизации предусмотрена ограниченная интеграция нейросетей (AI-сервисы): автоматизированная генерация рекламы по объекту, определение и добавление тегов для площадок/рекламы по содержимому, а также подбор подходящих площадок по тегам с использованием простого алгоритма (платно или по системе лояльности/грейдам). Это учебный/прототипный проект на этапе активной разработки, с фокусом на backend API, admin-панели и масштабируемой структуре для будущих фич.

#### Основные цели:
- Авторизация и управление пользователями (регистрация, логин, CRUD-операции с ролями: пользователь, администратор, модератор).
- Создание и управление рекламными кампаниями (добавление, поиск с фильтрами/сортировкой/пагинацией, редактирование, удаление).
- Управление площадками для размещения рекламы (добавление, валидация, подбор по тегам).
- Ролевая модель: Админы управляют всем, модераторы — контентом и модерацией, пользователи — своими кампаниями и площадками.
- Масштабируемая система с интеграцией AI для генерации контента, тегов и подбора (с ограничениями по платным грейдам или лояльности).
- Монетизация через грейды, лояльность и геймификацию.

#### Технологический стек:
- **Backend**: Node.js + Express.js, SQLite (базы: users.db, adCampaigns.db, adPlatforms.db), JWT для аутентификации, bcrypt для хэширования паролей, Joi для валидации.
- **Frontend**: Чистый HTML/CSS/JS, динамическая загрузка компонентов (header/footer), fetch для API-запросов.
- **Архитектура**: MVC (models для БД, controllers для логики, routes для маршрутов), middleware (аутентификация, валидация, логирование с morgan/Winston).
- **Дополнительно**: dotenv для .env, пагинация/фильтры в API, глобальная обработка ошибок.
- **Планируемые улучшения**: Миграция на PostgreSQL, версионирование API (/api/v1/), rate limiting, refresh токены, 2FA.

#### Ключевые особенности:
- **API**: RESTful эндпоинты (/api/users, /api/campaigns, /api/platforms) с поддержкой CRUD, фильтров (query params как ?status=active&sort=budget:desc), пагинации (?page=1&limit=10).
- **Безопасность**: JWT-токены, ролевые проверки (requireAdmin/Moderator), валидация данных.
- **Логирование**: morgan для запросов, winston для ошибок.
- **Frontend-админ**: Таблицы с поиском/фильтрами, формы добавления/редактирования/удаления (с модальными окнами).
- **AI-интеграция**: Ограниченная (платные генерации или по грейдам/лояльности) — автоматизированная генерация рекламы по объекту, определение/добавление тегов по содержимому, подбор площадок по тегам (простой алгоритм на основе совпадений тегов).
- **Уникальные фичи**: "Умный старт" (AI-ассистент для новичков), система доверия (верификация площадок, эскроу), социальные элементы (подписки, кейсы).

#### Текущий статус:
- Backend: Полноценные CRUD для пользователей, кампаний и площадок, MVC-структура (models/controllers/routes).
- Frontend: Базовые страницы (login, register, admin с тремя секциями управления), динамика через JS.
- Репозиторий: https://github.com/Gigabaitius/AdNexus (публичный, для проверки кода. Каждый патч дается ссылка на отдельную ветку)

### Планируемые функции и сущности

#### Основные сущности (текущие и планируемые):
- **Users** (пользователи): Хранение профилей, ролей, баланса. **Степень выполнения**: 90% (CRUD, роли, JWT — готово; добавить баланс/лояльность/email-верификацию).
- **Campaigns** (рекламные кампании): Хранение деталей кампаний, тегов, бюджета. **Степень выполнения**: 85% (CRUD с фильтрами/пагинацией — готово; добавить теги/AI-генерацию).
- **Platforms** (площадки для рекламы): Хранение сайтов/каналов с тегами, статистикой. **Степень выполнения**: 95% (полный CRUD, модерация, верификация, метрики качества — готово; добавить теги и связь с кампаниями).
- **Transactions** (транзакции): Логи платежей, переводов между пользователями. **Степень выполнения**: 0% (планируется с Stripe).
- **Tags** (теги): Сущность для тегов кампаний/площадок (категории, аудитория). **Степень выполнения**: 0% (приоритет для MVP).
- **Reviews** (отзывы): Отзывы на кампании, площадки, пользователей. **Степень выполнения**: 0%.
- **Achievements** (достижения): Для геймификации. **Степень выполнения**: 0%.
- **Subscriptions** (подписки/грейды): Уровни (free, standard, premium). **Степень выполнения**: 0%.

#### Планируемые функции (расширенный список):
- **Система тегов**: Теги для площадок/кампаний для таргетинга аудитории. AI-подбор по тегам. **Степень**: 0% (приоритет для MVP).
- **AI-интеграция**: Генерация рекламы, авто-теги, подбор площадок (ограничено по грейдам). **Степень**: 0% (интеграция OpenAI API).
- **Система лояльности**: Поощрения за активность. **Степень**: 0%.
- **Платные грейды**: Free/standard/premium с разными лимитами и бонусами. **Степень**: 0%.
- **Геймификация**: Достижения с бонусной валютой. **Степень**: 0%.
- **Система отзывов**: Отзывы после завершения с рейтингом. **Степень**: 0%.
- **Транзакции и платежи**: Переводы, заморозка средств, интеграция Stripe. **Степень**: 0%.
- **Аналитика и статистика**: Отчеты, dashboard, экспорт в CSV. **Степень**: 5% (базовая статистика для кампаний и площадок готова).
- **Чат/переговоры**: Встроенный чат между участниками. **Степень**: 0%.
- **Модерация контента**: Проверка кампаний/площадок. **Степень**: 75% (полная логика модерации для кампаний и площадок реализована).
- **Быстрые улучшения**: Email-уведомления, темная тема, Swagger документация. **Степень**: 0%.

### Пошаговый разбор текущих и планируемых бизнес-процессов

#### Текущие процессы (реализованы)
1. **Регистрация и вход пользователя**:
   - Пользователь вводит username, email, password на фронтенде.
   - Frontend отправляет POST /api/register или /api/login.
   - Backend валидирует данные (Joi), хеширует пароль (bcrypt), сохраняет в users.db.
   - Возвращает JWT-токен для сессии.
   - **Статус**: 95% (реализовано; добавить email-верификацию).

2. **Управление пользователями (админ)**:
   - Админ заходит в панель, видит список пользователей.
   - Выполняет поиск/фильтры, редактирует (PUT /api/users/:id) или удаляет (DELETE).
   - **Статус**: 90% (готово с пагинацией/фильтрами).

3. **Создание/управление кампанией (рекламодатель)**:
   - Авторизованный пользователь заполняет форму (title, budget и т.д.).
   - Frontend отправляет POST /api/campaigns.
   - Backend валидирует, сохраняет в adCampaigns.db, ассоциирует с user_id.
   - Админ/модератор может просматривать/модерировать.
   - **Статус**: 85% (CRUD готов; добавить теги/AI).

4. **Создание/управление площадкой (владелец)**:
   - Владелец добавляет площадку через форму в админ-панели.
   - Проверка уникальности URL в реальном времени.
   - Динамические поля цен в зависимости от модели ценообразования.
   - Модерация с тремя вариантами решений (approved/rejected/requires_changes).
   - Управление верификацией и метриками качества.
   - **Статус**: 95% (полностью реализовано; добавить теги).

#### Планируемые процессы (приоритеты для MVP)
1. **Процесс связывания кампаний и площадок** (высший приоритет):
   - Создание промежуточной таблицы campaign_platforms.
   - Рекламодатель выбирает площадки для кампании.
   - Расчет стоимости на основе модели ценообразования площадки.
   - Заморозка средств на счете кампании.
   - Автоматическое размещение после одобрения.

2. **Процесс системы тегов** (высокий приоритет):
   - Создание таблицы tags и связующих таблиц.
   - Добавление тегов к кампаниям и площадкам.
   - Поиск и фильтрация по тегам.
   - AI-генерация тегов по описанию.

3. **Процесс транзакций и платежей**:
   - Пополнение баланса (Stripe/PayPal).
   - Заморозка средств при запуске кампании.
   - Перевод владельцу площадки минус комиссия.
   - История транзакций, возвраты при спорах.

4. **Процесс AI-интеграции**:
   - Проверка лимита по грейду/лояльности.
   - Запрос к OpenAI API для генерации/анализа.
   - Авто-добавление результатов в кампанию/площадку.
   - Лимиты: free (5/мес), premium (unlimited).

5. **Процесс лояльности и грейдов**:
   - Баллы за активности (кампании, отзывы).
   - Грейды с бонусами (скидки комиссии, AI-генерации).
   - Обмен баллов на функции.

6. **Процесс геймификации**:
   - Отслеживание достижений ("Новичок", "Магнат").
   - Бонусная валюта для оплаты функций.
   - Лидерборды по активности.

7. **Процесс отзывов и рейтингов**:
   - Авто-запрос отзыва после завершения.
   - Влияние на рейтинг и видимость в поиске.
   - Модерация для предотвращения спама.

#### Монетизация (быстрый старт):
- Лимиты бесплатных аккаунтов (3 кампании, 5 площадок)
- Платная верификация площадок
- Премиум размещение в поиске
- API доступ для автоматизации

### Предложения по улучшению проекта

#### Немедленные приоритеты (1-2 недели):
1. **Создать связь между кампаниями и площадками** - без этого биржа не функциональна
2. **Реализовать систему тегов** - ключевой элемент для матчинга
3. **Добавить публичные страницы** для просмотра активных кампаний/площадок
4. **Создать личный кабинет пользователя** для управления своими объектами

#### Среднесрочные задачи (1-2 месяца):
1. **Интегрировать базовую систему платежей** (начать с тестового режима)
2. **Добавить систему уведомлений** (email + in-app)
3. **Реализовать базовую аналитику** с графиками
4. **Создать API документацию** (Swagger)

#### Технические улучшения:
1. **Добавить индексы в БД** для часто используемых полей
2. **Реализовать кеширование** для популярных запросов
3. **Добавить unit и integration тесты**
4. **Настроить CI/CD pipeline**

Репозиторий текущего патча: https://github.com/Gigabaitius/AdNexus/tree/0.0.4---Platforms
Учти информацию выше, проанализируй репозиторий.
Обнови статусы готовности частей проекта. 
Не сокращай имеющиеся пункты, можешь дополнять результат отдельной секцией с твоими идеями и/или предложениями по улучшению проекта, при согласии пользователя - дополняй ими основной текст.

Наша задача - создать востребованный сервис.